# APK Builder

**APK Builder is a Python script that automates the process of recompiling and signing decompiled Android applications (APKs). It utilizes apktool for rebuilding APKs and apksigner for signing them with a debug keystore. Additionally, it offers an option to clean up leftover files after the build process.**

## 🚀 Features
- Automatically detects valid Android projects in `src/output`.
- Uses **apktool** to rebuild APKs.
- Signs APKs with **apksigner** using a debug keystore.
- Generates a keystore if none is found.
- Offers an option to clean up unused files after signing.
- Offers an option to install the apk onto a connected device.

## 🛠 Requirements
Before running the script, ensure that the following tools are installed and available in your system's `PATH`:

- [Python 3.x](https://www.python.org/downloads/)
- [apktool](https://ibotpeaches.github.io/Apktool/install/)
- [apksigner](https://developer.android.com/studio/command-line/apksigner)
- [keytool](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html) (comes with Java)

## 📦 Installation
Clone the repository and navigate to the script directory:
```bash
$ git clone https://github.com/your-repo/apk-builder.git
$ cd apk-builder
```
Ensure that `apktool`, `apksigner`, and `keytool` are properly installed and added to your system’s environment variables.

## 🚀 Usage
Run the script using:
```bash
$ python apk_builder.py
```
### Workflow:
1. The script scans `src/output` for valid Android projects.
2. You select the project you want to build.
3. The script compiles the project into an APK.
4. The APK is signed using `apksigner`.
5. The script asks if you want to **remove leftover files** (`_unsigned.apk` and `.idsig`).

### Example Run:
```bash
🛠 Android APK Builder
📦 Available Android Projects

┌───────┬────────────────────────────────┐
│ Index │ Project Folder                 │
├───────┼────────────────────────────────┤
│   1   │ my_android_app                 │
└───────┴────────────────────────────────┘

Enter the number of the project to build: 1
🚀 Building APK for my_android_app...
✅ APK successfully built: src/output/build_output/my_android_app_unsigned.apk
🔏 Signing APK...
✅ APK successfully signed: src/output/build_output/my_android_app_signed.apk
❓ Would you like to remove leftover files (unsigned APK & .idsig)? (y/n) [n]: y
✅ Cleanup complete!
```

## 🧹 Cleanup Option
At the end of the process, you’ll be asked if you want to clean up the intermediate files:
- `_unsigned.apk` (Unsigned APK)
- `.idsig` (Signature file generated by `apksigner`)

Selecting **yes** will remove these files, keeping only the final signed APK.

## ⚠ Troubleshooting
### 1. `apktool: command not found`
Ensure that `apktool` is installed and properly added to your `PATH`. You can check by running:
```bash
$ apktool --version
```
If not found, install it from [here](https://ibotpeaches.github.io/Apktool/install/).

### 2. `apksigner: command not found`
Ensure that `apksigner` is installed and available in your system's environment variables. It is part of the Android SDK (`build-tools` directory).

### 3. `keytool: command not found`
Make sure **Java Development Kit (JDK)** is installed, as `keytool` comes with it.

### 4. Script Freezes During Build or Signing
If the script appears to hang, press **Enter** to see if it resumes execution. If it continues freezing, try running the commands manually:
```bash
$ apktool b src/output/my_project -o my_project_unsigned.apk
$ apksigner sign --ks debug.keystore --ks-pass pass:android --out my_project_signed.apk my_project_unsigned.apk
```
This will help debug potential issues.

## 📜 License
This project is licensed under the **MIT License**.

## 👨‍💻 Author
Developed by **[Your Name]**

---

This **README.md** provides a detailed overview of the APK Builder, including installation, usage, and troubleshooting steps. 🚀

